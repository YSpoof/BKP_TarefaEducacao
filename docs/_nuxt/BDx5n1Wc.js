import{_ as p}from"./DZG1szEG.js";import{_ as f}from"./BXXdeqHc.js";import{d as _,y as x,K as v,m as y,c as n,q as c,f as r,o as s,e as d,a as k,w as C,s as L,F as b,g as P,i as M,z as w,b as i}from"./DnacoLQE.js";import{u as B}from"./CuMEGSzY.js";const S={key:0},N={key:0,class:"text-xl text-center"},z={key:1,ref:"containerEl",class:"w-auto my-5 mx-auto grid grid-cols-1 md:grid-cols-3 grid-rows-1 gap-3"},O={class:"col-span-1 md:col-span-3 flex justify-center py-4"},V={key:0,class:"col-span-1 md:col-span-3 text-center pt-4 text-gray-500"},q=_({__name:"PostScroller",props:{posts:{default:()=>[]},hideUiOnBlank:{type:Boolean,default:!1}},setup(a){const e=x({loadedPosts:[],isLoading:!1,hasMoreContent:!0,batchSize:9});v(()=>a.posts,o=>{e.loadedPosts=o.slice(0,e.batchSize),e.hasMoreContent=o.length>e.batchSize,e.isLoading=!1},{immediate:!0});const u=()=>{if(!e.hasMoreContent||e.isLoading)return;e.isLoading=!0;const o=e.loadedPosts.length,t=a.posts.slice(o,o+e.batchSize);t.length>0?(e.loadedPosts=[...e.loadedPosts,...t],e.hasMoreContent=e.loadedPosts.length<a.posts.length):e.hasMoreContent=!1,e.isLoading=!1},m=y(()=>a.posts.length===0&&a.hideUiOnBlank);return B(document,u,{distance:500,canLoadMore:()=>e.hasMoreContent&&!e.isLoading,onError:o=>{console.error("Infinite scroll error:",o),e.isLoading=!1,alert("Ocorreu um erro ao carregar mais conteúdo.")}}),(o,t)=>{const g=p,h=f;return r(m)?c("",!0):(s(),n("div",S,[o.posts.length===0?(s(),n("p",N,[t[1]||(t[1]=d(" Nenhuma atividade disponível no momento. ")),k(g,{href:"/",class:"underline text-blue-500"},{default:C(()=>t[0]||(t[0]=[d("Clique aqui para voltar para a home")])),_:1,__:[0]}),t[2]||(t[2]=d(". "))])):(s(),n("div",z,[(s(!0),n(b,null,P(r(e).loadedPosts,l=>(s(),M(h,{key:l.id,post:l},null,8,["post"]))),128)),L(i("div",O,t[3]||(t[3]=[i("div",{class:"animate-pulse flex space-x-4"},[i("div",{class:"h-8 w-8 bg-gray-300 dark:bg-gray-700 rounded-full"}),i("div",{class:"h-8 w-32 bg-gray-300 dark:bg-gray-700 rounded-md"})],-1)]),512),[[w,r(e).isLoading]]),!r(e).hasMoreContent&&r(e).loadedPosts.length>0?(s(),n("div",V," Não há mais atividades disponíveis. ")):c("",!0)],512))]))}}}),I=Object.assign(q,{__name:"PostScroller"});export{I as _};
