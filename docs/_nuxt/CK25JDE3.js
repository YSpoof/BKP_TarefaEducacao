var L=Object.defineProperty;var U=a=>{throw TypeError(a)};var F=(a,s,o)=>s in a?L(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o;var y=(a,s,o)=>F(a,typeof s!="symbol"?s+"":s,o),V=(a,s,o)=>s.has(a)||U("Cannot "+o);var B=(a,s,o)=>(V(a,s,"read from private field"),o?o.call(a):s.get(a)),q=(a,s,o)=>s.has(a)?U("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(a):s.set(a,o);import N from"./CxYjHd7O.js";import{_ as G}from"./DZG1szEG.js";import{p as g,s as S}from"./BlKofW2U.js";import{m as T,a2 as f,y as R,as as K,at as H,d as J,i as X,c as Q,o as M,w as Z,a as D,b as p,t as W,f as Y,Z as P}from"./DnacoLQE.js";import{u as ee}from"./BXXdeqHc.js";import"./CuMEGSzY.js";import"./NxX-rhnq.js";function te(a){return typeof a=="string"?`'${a}'`:new re().serialize(a)}const re=function(){var s;class a{constructor(){q(this,s,new Map)}compare(e,r){const t=typeof e,n=typeof r;return t==="string"&&n==="string"?e.localeCompare(r):t==="number"&&n==="number"?e-r:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(r,!0))}serialize(e,r){if(e===null)return"null";switch(typeof e){case"string":return r?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const r=Object.prototype.toString.call(e);if(r!=="[object Object]")return this.serializeBuiltInType(r.length<10?`unknown:${r}`:r.slice(8,-1),e);const t=e.constructor,n=t===Object||t===void 0?"":t.name;if(n!==""&&globalThis[n]===t)return this.serializeBuiltInType(n,e);if(typeof e.toJSON=="function"){const i=e.toJSON();return n+(i!==null&&typeof i=="object"?this.$object(i):`(${this.serialize(i)})`)}return this.serializeObjectEntries(n,Object.entries(e))}serializeBuiltInType(e,r){const t=this["$"+e];if(t)return t.call(this,r);if(typeof(r==null?void 0:r.entries)=="function")return this.serializeObjectEntries(e,r.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,r){const t=Array.from(r).sort((i,l)=>this.compare(i[0],l[0]));let n=`${e}{`;for(let i=0;i<t.length;i++){const[l,u]=t[i];n+=`${this.serialize(l,!0)}:${this.serialize(u)}`,i<t.length-1&&(n+=",")}return n+"}"}$object(e){let r=B(this,s).get(e);return r===void 0&&(B(this,s).set(e,`#${B(this,s).size}`),r=this.serializeObject(e),B(this,s).set(e,r)),r}$function(e){const r=Function.prototype.toString.call(e);return r.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${r.replace(/\s*\n\s*/g,"")}`}$Array(e){let r="[";for(let t=0;t<e.length;t++)r+=this.serialize(e[t]),t<e.length-1&&(r+=",");return r+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((r,t)=>this.compare(r,t)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}s=new WeakMap;for(const o of["Error","RegExp","URL"])a.prototype["$"+o]=function(e){return`${o}(${e})`};for(const o of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])a.prototype["$"+o]=function(e){return`${o}[${e.join(",")}]`};for(const o of["BigInt64Array","BigUint64Array"])a.prototype["$"+o]=function(e){return`${o}[${e.join("n,")}${e.length>0?"n":""}]`};return a}(),se=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],oe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",b=[];class ne{constructor(){y(this,"_data",new $);y(this,"_hash",new $([...se]));y(this,"_nDataBytes",0);y(this,"_minBufferSize",0)}finalize(s){s&&this._append(s);const o=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(o/4294967296),this._data.words[(e+64>>>9<<4)+15]=o,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(s,o){const e=this._hash.words;let r=e[0],t=e[1],n=e[2],i=e[3],l=e[4],u=e[5],h=e[6],_=e[7];for(let c=0;c<64;c++){if(c<16)b[c]=s[o+c]|0;else{const m=b[c-15],d=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,w=b[c-2],A=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;b[c]=d+b[c-7]+A+b[c-16]}const j=l&u^~l&h,E=r&t^r&n^t&n,z=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),C=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),x=_+C+j+oe[c]+b[c],k=z+E;_=h,h=u,u=l,l=i+x|0,i=n,n=t,t=r,r=x+k|0}e[0]=e[0]+r|0,e[1]=e[1]+t|0,e[2]=e[2]+n|0,e[3]=e[3]+i|0,e[4]=e[4]+l|0,e[5]=e[5]+u|0,e[6]=e[6]+h|0,e[7]=e[7]+_|0}_append(s){typeof s=="string"&&(s=$.fromUtf8(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_process(s){let o,e=this._data.sigBytes/64;s?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const r=e*16,t=Math.min(r*4,this._data.sigBytes);if(r){for(let n=0;n<r;n+=16)this._doProcessBlock(this._data.words,n);o=this._data.words.splice(0,r),this._data.sigBytes-=t}return new $(o,t)}}class ${constructor(s,o){y(this,"words");y(this,"sigBytes");s=this.words=s||[],this.sigBytes=o===void 0?s.length*4:o}static fromUtf8(s){const o=unescape(encodeURIComponent(s)),e=o.length,r=[];for(let t=0;t<e;t++)r[t>>>2]|=(o.charCodeAt(t)&255)<<24-t%4*8;return new $(r,e)}toBase64(){const s=[];for(let o=0;o<this.sigBytes;o+=3){const e=this.words[o>>>2]>>>24-o%4*8&255,r=this.words[o+1>>>2]>>>24-(o+1)%4*8&255,t=this.words[o+2>>>2]>>>24-(o+2)%4*8&255,n=e<<16|r<<8|t;for(let i=0;i<4&&o*8+i*6<this.sigBytes*8;i++)s.push(ae.charAt(n>>>6*(3-i)&63))}return s.join("")}concat(s){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let o=0;o<s.sigBytes;o++){const e=s.words[o>>>2]>>>24-o%4*8&255;this.words[this.sigBytes+o>>>2]|=e<<24-(this.sigBytes+o)%4*8}else for(let o=0;o<s.sigBytes;o+=4)this.words[this.sigBytes+o>>>2]=s.words[o>>>2];this.sigBytes+=s.sigBytes}}function ie(a){return new ne().finalize(a).toBase64()}function v(a){return ie(te(a))}function le(a,s,o){const[e={},r]=typeof s=="string"?[{},s]:[s,o],t=T(()=>f(a)),n=T(()=>f(e.key)||"$f"+v([r,typeof t.value=="string"?t.value:"",...ce(e)]));if(!e.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:i,lazy:l,default:u,transform:h,pick:_,watch:c,immediate:j,getCachedData:E,deep:z,dedupe:C,...x}=e,k=R({...K,...x,cache:typeof e.cache=="boolean"?void 0:e.cache}),m={server:i,lazy:l,default:u,transform:h,pick:_,immediate:j,getCachedData:E,deep:z,dedupe:C,watch:c===!1?[]:[...c||[],k]};let d;return ee(c===!1?n.value:n,()=>{var I;(I=d==null?void 0:d.abort)==null||I.call(d,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),d=typeof AbortController<"u"?new AbortController:{};const A=f(e.timeout);let O;return A&&(O=setTimeout(()=>d.abort(new DOMException("Request aborted due to timeout.","AbortError")),A),d.signal.onabort=()=>clearTimeout(O)),(e.$fetch||globalThis.$fetch)(t.value,{signal:d.signal,...k}).finally(()=>{clearTimeout(O)})},m)}function ce(a){var o;const s=[((o=f(a.method))==null?void 0:o.toUpperCase())||"GET",f(a.baseURL)];for(const e of[a.params||a.query]){const r=f(e);if(!r)continue;const t={};for(const[n,i]of Object.entries(r))t[f(n)]=f(i);s.push(t)}if(a.body){const e=f(a.body);if(!e)s.push(v(e));else if(e instanceof ArrayBuffer)s.push(v(Object.fromEntries([...new Uint8Array(e).entries()].map(([r,t])=>[r,t.toString()]))));else if(e instanceof FormData){const r={};for(const t of e.entries()){const[n,i]=t;r[n]=i instanceof File?i.name:i}s.push(v(r))}else if(H(e))s.push(v(R(e)));else try{s.push(v(e))}catch{console.warn("[useFetch] Failed to hash body",e)}}return s}const ue={key:1},de={ref:"paymentDialog",id:"paymentDialog",class:"text-center backdrop-blur-sm bg-slate-200/95 backdrop:bg-slate-300/50 dark:backdrop:bg-stone-900/50 dark:bg-stone-800/95 text-inherit border-yellow-700 border border-solid rounded overscroll-none overflow-clip p-4"},pe={class:"flex flex-col justify-center items-center"},fe=J({__name:"GetActivity",props:{type:{type:String,default:"download"},link:{type:String,default:""},price:String,id:{type:String,default:"0"}},setup(a){const s=async r=>(console.log("Validar pagamento",r),!0),o=async r=>{var n;if(console.log("Comprar atividade premium",r),g.value)if(await s(g.value)){await P("/202");return}else g.value="";if(!S.value.name.trim()||!S.value.email.trim()){alert("Você precisa preencher seu nome e email nas configurações"),await P("/settings");return}const t=document.getElementById("paymentDialog");try{const i=await $fetch("/api/v1/checkout",{method:"POST",body:JSON.stringify({product_id:r,user_name:S.value.name.trim(),user_email:S.value.email.trim()})});console.log(i);return}catch(i){t.close(),console.error("Erro ao comprar atividade premium",i),alert("Erro ao comprar atividade.");return}},e=async r=>{console.log("Cancelar compra com id",r);const{error:t}=await le("/api/v1/cancel-payment",{method:"DELETE",body:{payment_id:g.value}},"$UCxz3I-fp0");if(t){console.error("Erro ao cancelar pagamento",t),alert("Erro ao cancelar pagamento");return}g.value="";const n=document.getElementById("paymentDialog");n&&(n.close(),alert("Compra cancelada com sucesso"))};return(r,t)=>{var l;const n=N,i=G;return a.type=="download"?(M(),X(i,{key:0,class:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-base rounded-md shadow-sm bg-blue-600 hover:bg-blue-800 text-white w-full font-bold btn",href:a.link,download:"",external:!0},{default:Z(()=>[D(n,{name:"mdi:download",size:"25px"}),t[2]||(t[2]=p("span",null,"Baixar",-1))]),_:1,__:[2]},8,["href"])):(M(),Q("div",ue,[p("button",{class:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-base rounded-md shadow-sm bg-yellow-600 hover:bg-yellow-700 text-white w-full font-bold btn",onClick:t[0]||(t[0]=u=>o(a.id))},[D(n,{name:"mdi:shopping",size:"25px"}),p("span",null,"R$ "+W((l=a.price)==null?void 0:l.replace(".",","))+" - Comprar",1)]),p("dialog",de,[p("div",pe,[D(n,{name:"svg-spinners:blocks-wave",size:"300",class:"text-slate-400"}),t[3]||(t[3]=p("label",{for:"pixKey"},"Chave PIX:",-1)),t[4]||(t[4]=p("p",{id:"pixKey",class:"bg-slate-100 dark:bg-stone-800 rounded-lg max-w-fit p-1",onclick:"navigator.clipboard.writeText(this.innerHTML);alert('Código PIX copiado para a área de transferência')"}," Carregando QR Code ",-1)),t[5]||(t[5]=p("a",{class:"block py-2 px-4 m-4 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-900 text-black rounded-lg hidden"},"Continuar",-1)),p("button",{class:"block py-2 px-4 m-4 bg-red-600 hover:bg-red-700 disabled:bg-red-900 text-black rounded-lg",onClick:t[1]||(t[1]=u=>e(Y(g).value))}," Cancelar ")])],512)]))}}}),Be=Object.assign(fe,{__name:"GetActivity"});export{Be as default};
